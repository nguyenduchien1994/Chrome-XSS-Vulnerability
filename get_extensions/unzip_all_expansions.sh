# Unzip every extension in CRX_FOLDER into UNZIPPED_FOLDER/extension_id,
# skipping any where the extension_id already has a folder

CRX_FOLDER="extensions"
UNZIPPED_FOLDER="unpacked_extensions"

for filename in ${CRX_FOLDER}/*.crx; do
    temp=${filename%.crx}
    eid=${temp#${CRX_FOLDER}/}
    if [ ! -d "${UNZIPPED_FOLDER}/${eid}" ]; then
        mkdir ${UNZIPPED_FOLDER}/${eid}
        unzip ${CRX_FOLDER}/${eid}.crx -d ${UNZIPPED_FOLDER}/${eid}
    fi
done

