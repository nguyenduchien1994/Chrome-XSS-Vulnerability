var spoon = require('..'),
    assert = require('assert'),
    vm = require('vm'),
    esprima = require('esprima'),
    escodegen = require('escodegen'),
    fs = require('fs');

//var filename = process.argv[2];
var filename = "/Users/firechant/Library/Application\ Support/Google/Chrome/Default/Extensions/boadgeojelhgndaghljhdicfkmllpafd/15.1120.0.4_0/cast_sender.js"
var thefile = fs.readFileSync(filename, 'utf-8');

var ast = esprima.parse(thefile);

var str_ast = JSON.stringify(ast, null, 2);
console.log(str_ast);

var cfg = spoon.construct(ast);

console.log(cfg.toString());

//var out = spoon.render(cfg);
//var code = escodegen.generate(out);

