var spoon = require('..'),
    assert = require('assert'),
    vm = require('vm'),
    esprima = require('esprima'),
    escodegen = require('escodegen'),
    fs = require('fs');

var filename = process.argv[2];
var thefile = fs.readFileSync(filename, 'ascii');

var ast = esprima.parse(thefile);

var str_ast = JSON.stringify(ast, null, 2);
//console.log(str_ast);

var cfg = spoon.construct(ast);

console.log(cfg.toString());

//var out = spoon.render(cfg);
//var code = escodegen.generate(out);

//console.log(out);
//console.log(code);

